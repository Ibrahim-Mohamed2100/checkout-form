(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"+l/p":function(e,t,i){"use strict";i.r(t),i.d(t,"PaymentTabPageModule",(function(){return F}));var r=i("TEn/"),o=i("tyNb"),n=i("ofXK"),a=i("3Pt+"),b=i("R0Ic"),c=i("Cfvw"),m=i("fXoL"),s=i("e8h1"),l=i("UTcu"),d=i("MJr+");function u(e,t){1&e&&(m.Mb(0,"p"),m.Mb(1,"ion-text",20),m.ec(2," Please fix all the errors. "),m.Lb(),m.Lb())}function p(e,t){1&e&&(m.Mb(0,"div"),m.ec(1," Field is required "),m.Lb())}function h(e,t){1&e&&(m.Mb(0,"div"),m.ec(1," Invalid format "),m.Lb())}function g(e,t){1&e&&(m.Mb(0,"div"),m.ec(1," Field is required "),m.Lb()),2&e&&m.Yb("@requiredTrigger",void 0)}function y(e,t){1&e&&(m.Mb(0,"div"),m.ec(1," Field is required "),m.Lb()),2&e&&m.Yb("@requiredTrigger",void 0)}let f=(()=>{class e{constructor(e,t,i,r){this.storage=e,this.authGuard=t,this.router=i,this.tabPage=r,this.form={}}ngOnInit(){this.paymentForm=new a.d({cardNumber:new a.b("",[a.p.required]),cvv:new a.b("",a.p.required),expiryDate:new a.b("",a.p.required)}),Object(c.a)(this.storage.get("forms-data")).subscribe(e=>{if(this.form=e,!e||!e.paymentForm)return;const t=this.form.paymentForm.model;this.paymentForm.get("cardNumber").setValue(t.cardNumber),this.paymentForm.get("cvv").setValue(t.cvv),this.paymentForm.get("expiryDate").setValue(t.expiryDate)}),this.paymentForm.valueChanges.subscribe(e=>{this.authGuard.userAuth=!!this.paymentForm.valid,this.form.paymentForm={dirty:this.paymentForm.dirty,model:e,status:this.paymentForm.status},Object(c.a)(this.storage.set("forms-data",this.form)).subscribe()})}onSubmit(){this.validateAllFormFields(this.paymentForm),this.paymentForm.valid?(this.isValidForm=!0,this.router.navigate(["review"])):this.isValidForm=!1}onReset(){this.isValidForm=null}onPrevious(){this.router.navigate(["shipping"]),this.tabPage.segmentValue="shipping"}validateAllFormFields(e){Object.keys(e.controls).forEach(t=>{const i=e.get(t);i instanceof a.b?i.markAsTouched({onlySelf:!0}):i instanceof a.d&&this.validateAllFormFields(i)})}}return e.\u0275fac=function(t){return new(t||e)(m.Jb(s.b),m.Jb(l.a),m.Jb(o.g),m.Jb(d.a))},e.\u0275cmp=m.Db({type:e,selectors:[["app-payment-tab"]],decls:47,vars:6,consts:[[1,""],[1,"list-form",3,"formGroup"],[1,"checkout-container"],[1,"ion-text-start"],["type","reset","color","light",3,"click"],["slot","end","name","close"],[4,"ngIf"],[1,"ion-no-padding","ion-no-margin","ion-margin-vertical"],[1,"ion-margin-horizontal"],["size","9","size-sm",""],["position","floating",1,"required"],["inputmode","numeric","maxlength","16","minlength","16","placeholder","####-####-####-####","formControlName","cardNumber"],["displayFormat","MMMM YYYY","pickerFormat","MMM YYYY","formControlName","expiryDate"],["inputmode","numeric","type","tel","maxlength","3","minlength","3","formControlName","cvv"],[1,"ion-no-padding"],["type","button","color","light",3,"click"],["slot","start","name","chevron-back-outline"],[1,"ion-text-end"],["type","submit","color","tertiary",3,"click"],["slot","end","name","chevron-forward-outline"],["color","danger"]],template:function(e,t){1&e&&(m.Mb(0,"ion-content",0),m.Mb(1,"form",1),m.Mb(2,"div",2),m.Mb(3,"div",3),m.Mb(4,"ion-button",4),m.Tb("click",(function(){return t.onReset()})),m.Mb(5,"ion-label"),m.ec(6,"Reset"),m.Lb(),m.Kb(7,"ion-icon",5),m.Lb(),m.Lb(),m.dc(8,u,3,0,"p",6),m.Mb(9,"ion-card",7),m.Mb(10,"ion-card-header",8),m.Mb(11,"ion-card-title"),m.ec(12,"Payment Method"),m.Lb(),m.Lb(),m.Mb(13,"ion-grid"),m.Mb(14,"ion-row"),m.Mb(15,"ion-col",9),m.Mb(16,"ion-item",0),m.Mb(17,"ion-label",10),m.ec(18,"Card Number"),m.Lb(),m.Kb(19,"ion-input",11),m.Lb(),m.dc(20,p,2,0,"div",6),m.dc(21,h,2,0,"div",6),m.Lb(),m.Lb(),m.Mb(22,"ion-row"),m.Mb(23,"ion-col",9),m.Mb(24,"ion-item"),m.Mb(25,"ion-label",10),m.ec(26,"Expiry date"),m.Lb(),m.Kb(27,"ion-datetime",12),m.Lb(),m.dc(28,g,2,1,"div",6),m.Lb(),m.Mb(29,"ion-col",9),m.Mb(30,"ion-item",0),m.Mb(31,"ion-label",10),m.ec(32,"CVV"),m.Lb(),m.Kb(33,"ion-input",13),m.Lb(),m.dc(34,y,2,1,"div",6),m.Lb(),m.Lb(),m.Lb(),m.Lb(),m.Mb(35,"ion-grid",14),m.Mb(36,"ion-row"),m.Mb(37,"ion-col",3),m.Mb(38,"ion-button",15),m.Tb("click",(function(){return t.onPrevious()})),m.Mb(39,"ion-label"),m.ec(40,"Previous"),m.Lb(),m.Kb(41,"ion-icon",16),m.Lb(),m.Lb(),m.Mb(42,"ion-col",17),m.Mb(43,"ion-button",18),m.Tb("click",(function(){return t.onSubmit()})),m.Mb(44,"ion-label"),m.ec(45,"Next"),m.Lb(),m.Kb(46,"ion-icon",19),m.Lb(),m.Lb(),m.Lb(),m.Lb(),m.Lb(),m.Lb(),m.Lb()),2&e&&(m.zb(1),m.Yb("formGroup",t.paymentForm),m.zb(7),m.Yb("ngIf",0==t.isValidForm),m.zb(12),m.Yb("ngIf",t.paymentForm.get("cardNumber").hasError("required")&&(t.paymentForm.get("cardNumber").dirty||t.paymentForm.get("cardNumber").touched)),m.zb(1),m.Yb("ngIf",t.paymentForm.get("cardNumber").hasError("minlength")&&t.paymentForm.get("cardNumber").dirty),m.zb(7),m.Yb("ngIf",!t.paymentForm.get("expiryDate").valid&&(t.paymentForm.get("expiryDate").dirty||t.paymentForm.get("expiryDate").touched)),m.zb(6),m.Yb("ngIf",!t.paymentForm.get("cvv").valid&&(t.paymentForm.get("cvv").dirty||t.paymentForm.get("cvv").touched)))},directives:[r.i,a.q,a.m,a.e,r.c,r.o,r.l,n.h,r.d,r.e,r.f,r.k,r.u,r.h,r.n,r.m,r.G,a.h,a.i,a.l,a.c,r.j,r.F,r.z],styles:[""],data:{animation:[Object(b.i)("requiredTrigger",[Object(b.h)(":enter",[Object(b.g)({transform:"translateY(-100%)"}),Object(b.e)("150ms",Object(b.g)({transform:"translateY(0%)"}))]),Object(b.h)(":leave",[Object(b.e)("150ms",Object(b.g)({transform:"translateY(-100%)"}))])])]}}),e})();const v=[{path:"",component:f}];let M=(()=>{class e{}return e.\u0275mod=m.Hb({type:e}),e.\u0275inj=m.Gb({factory:function(t){return new(t||e)},imports:[[o.i.forChild(v)],o.i]}),e})(),F=(()=>{class e{}return e.\u0275mod=m.Hb({type:e}),e.\u0275inj=m.Gb({factory:function(t){return new(t||e)},imports:[[r.B,n.b,a.g,a.o,o.i.forChild([{path:"",component:f}]),M]]}),e})()}}]);